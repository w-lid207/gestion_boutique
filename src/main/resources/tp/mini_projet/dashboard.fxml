<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>

<?import javafx.collections.FXCollections?>
<?import javafx.scene.shape.Rectangle?>
<?import java.lang.String?>
<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="tp.mini_projet.DashboardController"
            stylesheets="@dashboard.css"
            prefWidth="1200" prefHeight="700">

    <!-- Top: Header -->
    <top>
        <HBox styleClass="header-box">
            <Label text="DASHBOARD" styleClass="header-title"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="LOGOUT" styleClass="logout-button" onAction="#handleLogout"/>
        </HBox>
    </top>

    <!-- Left: Navigation -->
    <left>
        <VBox styleClass="nav-pane">
            <Button text="OVERVIEW" fx:id="overviewBtn" styleClass="nav-button active" onAction="#showOverview"/>
            <Button text="USERS" fx:id="usersBtn" styleClass="nav-button" onAction="#showUsers"/>
            <Button text="PRODUCTS" fx:id="productsBtn" styleClass="nav-button" onAction="#showProducts"/>
            <Button text="ORDERS" fx:id="ordersBtn" styleClass="nav-button" onAction="#showOrders"/>
            <Button text="ANALYTICS" fx:id="analyticsBtn" styleClass="nav-button" onAction="#showAnalytics"/>
            <Button text="SETTINGS" fx:id="settingsBtn" styleClass="nav-button" onAction="#showSettings"/>
        </VBox>
    </left>

    <!-- Center : Contenu principal -->
    <center>
        <StackPane fx:id="contentPane" styleClass="content-pane">

            <!-- Page Overview -->
            <VBox fx:id="overviewPane" styleClass="page-content" visible="true">
                <Label text="DASHBOARD OVERVIEW" styleClass="page-title"/>

                <!-- Cartes statistiques -->
                <HBox styleClass="stats-container">
                    <VBox styleClass="stat-card">
                        <Label text="USERS" styleClass="stat-icon"/>
                        <Label text="1,254" styleClass="stat-value"/>
                        <Label text="+12% from last month" styleClass="stat-trend positive"/>
                    </VBox>

                    <VBox styleClass="stat-card">
                        <Label text="REVENUE" styleClass="stat-icon"/>
                        <Label text="24,580" styleClass="stat-value"/>
                        <Label text="+22% from last month" styleClass="stat-trend positive"/>
                    </VBox>

                    <VBox styleClass="stat-card">
                        <Label text="PRODUCTS" styleClass="stat-icon"/>
                        <Label text="543" styleClass="stat-value"/>
                        <Label text="+5% from last month" styleClass="stat-trend positive"/>
                    </VBox>

                    <VBox styleClass="stat-card">
                        <Label text="ORDERS" styleClass="stat-icon"/>
                        <Label text="324" styleClass="stat-value"/>
                        <Label text="+18% from last month" styleClass="stat-trend positive"/>
                    </VBox>
                </HBox>

                <Label text="Logged in as: admin@gmail.com | Last login: Today 09:30" styleClass="user-info-box"/>

                <!-- Tableau récent -->
                <VBox spacing="15">
                    <Label text="RECENT ACTIVITY" styleClass="page-subtitle"/>
                    <TableView styleClass="data-table" prefHeight="250">
                        <columns>
                            <TableColumn text="TYPE" prefWidth="100"/>
                            <TableColumn text="DESCRIPTION" prefWidth="300"/>
                            <TableColumn text="STATUS" prefWidth="100"/>
                            <TableColumn text="DATE" prefWidth="120"/>
                        </columns>
                        <items>
                            <FXCollections fx:factory="observableArrayList">
                                <String fx:value="Login,User admin logged in,Success,2024-01-15 09:30"/>
                                <String fx:value="Order,New order #001 placed,Pending,2024-01-15 09:15"/>
                                <String fx:value="Product,Product 'Laptop' added,Completed,2024-01-15 08:45"/>
                                <String fx:value="User,User 'John' registered,Success,2024-01-14 16:20"/>
                                <String fx:value="System,System backup completed,Success,2024-01-14 03:00"/>
                            </FXCollections>
                        </items>
                    </TableView>
                </VBox>

                <!-- Quick Actions -->
                <HBox spacing="15" style="-fx-padding: 20 0;">
                    <Button text="VIEW REPORT" styleClass="action-button"/>
                    <Button text="EXPORT DATA" styleClass="secondary-button"/>
                    <Button text="REFRESH" styleClass="secondary-button"/>
                </HBox>
            </VBox>

            <!-- Page Users -->
            <VBox fx:id="usersPane" styleClass="page-content" visible="false">
                <HBox alignment="CENTER_LEFT" spacing="20">
                    <Label text="USER MANAGEMENT" styleClass="page-title"/>
                    <Button text="ADD USER" styleClass="action-button"/>
                </HBox>
                <Label text="Manage system users and permissions" styleClass="page-subtitle"/>

                <!-- Tableau des utilisateurs -->
                <TableView styleClass="data-table" prefHeight="400">
                    <columns>
                        <TableColumn text="ID" prefWidth="50"/>
                        <TableColumn text="NAME" prefWidth="150"/>
                        <TableColumn text="EMAIL" prefWidth="200"/>
                        <TableColumn text="ROLE" prefWidth="100"/>
                        <TableColumn text="STATUS" prefWidth="80"/>
                    </columns>
                    <items>
                        <FXCollections fx:factory="observableArrayList">
                            <String fx:value="1,Admin User,admin@system.com,Admin,Active"/>
                            <String fx:value="2,John Manager,john@company.com,Manager,Active"/>
                            <String fx:value="3,Jane Editor,jane@company.com,Editor,Pending"/>
                            <String fx:value="4,Bob Viewer,bob@company.com,Viewer,Active"/>
                            <String fx:value="5,Alice Tester,alice@company.com,Tester,Inactive"/>
                        </FXCollections>
                    </items>
                </TableView>

                <!-- Boutons d'action -->
                <HBox spacing="10" style="-fx-padding: 15 0;">
                    <Button text="EDIT" styleClass="secondary-button"/>
                    <Button text="DELETE" styleClass="secondary-button"/>
                    <Button text="REFRESH" styleClass="secondary-button"/>
                </HBox>
            </VBox>

            <!-- Page Products -->
            <VBox fx:id="productsPane" styleClass="page-content" visible="false">
                <HBox alignment="CENTER_LEFT" spacing="20">
                    <Label text="PRODUCT MANAGEMENT" styleClass="page-title"/>
                    <Button text="ADD PRODUCT" styleClass="action-button"/>
                </HBox>
                <Label text="Manage your product catalog" styleClass="page-subtitle"/>

                <!-- Grille de produits -->
                <GridPane hgap="20" vgap="20" style="-fx-padding: 20 0;">
                    <VBox styleClass="stat-card" GridPane.columnIndex="0" GridPane.rowIndex="0">
                        <Label text="SMARTPHONES" styleClass="stat-icon"/>
                        <Label text="45" styleClass="stat-value"/>
                        <Label text="8 in stock" styleClass="stat-trend"/>
                    </VBox>

                    <VBox styleClass="stat-card" GridPane.columnIndex="1" GridPane.rowIndex="0">
                        <Label text="LAPTOPS" styleClass="stat-icon"/>
                        <Label text="32" styleClass="stat-value"/>
                        <Label text="12 in stock" styleClass="stat-trend"/>
                    </VBox>

                    <VBox styleClass="stat-card" GridPane.columnIndex="2" GridPane.rowIndex="0">
                        <Label text="WATCHES" styleClass="stat-icon"/>
                        <Label text="67" styleClass="stat-value"/>
                        <Label text="Low stock" styleClass="stat-trend negative"/>
                    </VBox>

                    <VBox styleClass="stat-card" GridPane.columnIndex="3" GridPane.rowIndex="0">
                        <Label text="ACCESSORIES" styleClass="stat-icon"/>
                        <Label text="89" styleClass="stat-value"/>
                        <Label text="Good stock" styleClass="stat-trend positive"/>
                    </VBox>
                </GridPane>

                <!-- Liste de produits -->
                <VBox spacing="10" style="-fx-padding: 20 0;">
                    <Label text="PRODUCT LIST" styleClass="page-subtitle"/>
                    <ListView styleClass="data-table" prefHeight="200">
                        <items>
                            <FXCollections fx:factory="observableArrayList">
                                <String fx:value="iPhone 15 Pro - $999 (Stock: 25)"/>
                                <String fx:value="MacBook Pro - $1,299 (Stock: 18)"/>
                                <String fx:value="AirPods Pro - $249 (Stock: 45)"/>
                                <String fx:value="Apple Watch - $399 (Stock: 12)"/>
                                <String fx:value="iPad Air - $599 (Stock: 30)"/>
                            </FXCollections>
                        </items>
                    </ListView>
                </VBox>
            </VBox>

            <!-- Page Orders -->
            <VBox fx:id="ordersPane" styleClass="page-content" visible="false">
                <Label text="ORDER MANAGEMENT" styleClass="page-title"/>
                <Label text="Track and manage customer orders" styleClass="page-subtitle"/>

                <!-- Stats des commandes -->
                <HBox styleClass="stats-container">
                    <VBox styleClass="stat-card">
                        <Label text="TOTAL ORDERS" styleClass="stat-icon"/>
                        <Label text="324" styleClass="stat-value"/>
                    </VBox>

                    <VBox styleClass="stat-card">
                        <Label text="COMPLETED" styleClass="stat-icon"/>
                        <Label text="289" styleClass="stat-value"/>
                        <Label text="89%" styleClass="stat-trend positive"/>
                    </VBox>

                    <VBox styleClass="stat-card">
                        <Label text="PENDING" styleClass="stat-icon"/>
                        <Label text="35" styleClass="stat-value"/>
                        <Label text="11%" styleClass="stat-trend"/>
                    </VBox>
                </HBox>

                <!-- Liste des commandes -->
                <VBox spacing="15">
                    <Label text="RECENT ORDERS" styleClass="page-subtitle"/>
                    <VBox spacing="10">
                        <HBox spacing="10" style="-fx-padding: 10; -fx-background-color: #f8f8f8; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 5;">
                            <Label text="ORD-001" style="-fx-font-weight: bold; -fx-min-width: 80;"/>
                            <Label text="John Doe" style="-fx-min-width: 150;"/>
                            <Label text="120.00" style="-fx-min-width: 80;"/>
                            <Label text="Completed" style="-fx-text-fill: #000000; -fx-font-weight: bold; -fx-min-width: 100;"/>
                            <Label text="2024-01-15" style="-fx-min-width: 100;"/>
                        </HBox>
                        <HBox spacing="10" style="-fx-padding: 10; -fx-background-color: white; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 5;">
                            <Label text="ORD-002" style="-fx-font-weight: bold; -fx-min-width: 80;"/>
                            <Label text="Jane Smith" style="-fx-min-width: 150;"/>
                            <Label text="89.50" style="-fx-min-width: 80;"/>
                            <Label text="Shipped" style="-fx-text-fill: #000000; -fx-font-weight: bold; -fx-min-width: 100;"/>
                            <Label text="2024-01-14" style="-fx-min-width: 100;"/>
                        </HBox>
                        <HBox spacing="10" style="-fx-padding: 10; -fx-background-color: #f8f8f8; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 5;">
                            <Label text="ORD-003" style="-fx-font-weight: bold; -fx-min-width: 80;"/>
                            <Label text="Bob Johnson" style="-fx-min-width: 150;"/>
                            <Label text="245.00" style="-fx-min-width: 80;"/>
                            <Label text="Processing" style="-fx-text-fill: #666666; -fx-font-weight: bold; -fx-min-width: 100;"/>
                            <Label text="2024-01-14" style="-fx-min-width: 100;"/>
                        </HBox>
                        <HBox spacing="10" style="-fx-padding: 10; -fx-background-color: white; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 5;">
                            <Label text="ORD-004" style="-fx-font-weight: bold; -fx-min-width: 80;"/>
                            <Label text="Alice Brown" style="-fx-min-width: 150;"/>
                            <Label text="67.25" style="-fx-min-width: 80;"/>
                            <Label text="Completed" style="-fx-text-fill: #000000; -fx-font-weight: bold; -fx-min-width: 100;"/>
                            <Label text="2024-01-13" style="-fx-min-width: 100;"/>
                        </HBox>
                        <HBox spacing="10" style="-fx-padding: 10; -fx-background-color: #f8f8f8; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 5;">
                            <Label text="ORD-005" style="-fx-font-weight: bold; -fx-min-width: 80;"/>
                            <Label text="Charlie Wilson" style="-fx-min-width: 150;"/>
                            <Label text="189.99" style="-fx-min-width: 80;"/>
                            <Label text="Pending" style="-fx-text-fill: #666666; -fx-font-weight: bold; -fx-min-width: 100;"/>
                            <Label text="2024-01-12" style="-fx-min-width: 100;"/>
                        </HBox>
                    </VBox>
                </VBox>

                <!-- Actions des commandes -->
                <HBox spacing="15" style="-fx-padding: 20 0;">
                    <Button text="PROCESS SELECTED" styleClass="action-button"/>
                    <Button text="EXPORT ORDERS" styleClass="secondary-button"/>
                    <Button text="VIEW ALL" styleClass="secondary-button"/>
                </HBox>
            </VBox>

            <!-- Page Analytics -->
            <VBox fx:id="analyticsPane" styleClass="page-content" visible="false">
                <Label text="ANALYTICS" styleClass="page-title"/>
                <Label text="View system analytics and reports" styleClass="page-subtitle"/>

                <!-- Graphique simulé -->
                <VBox styleClass="stat-card" style="-fx-pref-height: 300; -fx-alignment: CENTER;">
                    <Label text="SALES OVERVIEW" styleClass="page-subtitle" style="-fx-padding: 0 0 20 0;"/>

                    <!-- Barres du graphique -->
                    <HBox spacing="30" alignment="BOTTOM_CENTER" style="-fx-padding: 20;">
                        <VBox alignment="BOTTOM_CENTER" spacing="5">
                            <Rectangle width="30" height="80" style="-fx-fill: #000000;"/>
                            <Label text="Mon" style="-fx-font-size: 12px;"/>
                        </VBox>
                        <VBox alignment="BOTTOM_CENTER" spacing="5">
                            <Rectangle width="30" height="120" style="-fx-fill: #333333;"/>
                            <Label text="Tue" style="-fx-font-size: 12px;"/>
                        </VBox>
                        <VBox alignment="BOTTOM_CENTER" spacing="5">
                            <Rectangle width="30" height="160" style="-fx-fill: #000000;"/>
                            <Label text="Wed" style="-fx-font-size: 12px;"/>
                        </VBox>
                        <VBox alignment="BOTTOM_CENTER" spacing="5">
                            <Rectangle width="30" height="100" style="-fx-fill: #666666;"/>
                            <Label text="Thu" style="-fx-font-size: 12px;"/>
                        </VBox>
                        <VBox alignment="BOTTOM_CENTER" spacing="5">
                            <Rectangle width="30" height="140" style="-fx-fill: #000000;"/>
                            <Label text="Fri" style="-fx-font-size: 12px;"/>
                        </VBox>
                        <VBox alignment="BOTTOM_CENTER" spacing="5">
                            <Rectangle width="30" height="60" style="-fx-fill: #999999;"/>
                            <Label text="Sat" style="-fx-font-size: 12px;"/>
                        </VBox>
                    </HBox>

                    <Label text="Weekly Sales Performance" style="-fx-text-fill: #666666; -fx-font-style: italic; -fx-padding: 10;"/>
                </VBox>

                <!-- Statistiques -->
                <GridPane hgap="20" vgap="15" style="-fx-padding: 20 0;">
                    <Label text="Monthly Growth:" GridPane.columnIndex="0" GridPane.rowIndex="0" styleClass="form-label"/>
                    <Label text="+15%" GridPane.columnIndex="1" GridPane.rowIndex="0" style="-fx-font-weight: bold;"/>

                    <Label text="Active Users:" GridPane.columnIndex="0" GridPane.rowIndex="1" styleClass="form-label"/>
                    <Label text="1,254" GridPane.columnIndex="1" GridPane.rowIndex="1" style="-fx-font-weight: bold;"/>

                    <Label text="Total Revenue:" GridPane.columnIndex="0" GridPane.rowIndex="2" styleClass="form-label"/>
                    <Label text="24,580" GridPane.columnIndex="1" GridPane.rowIndex="2" style="-fx-font-weight: bold;"/>

                    <Label text="Conversion Rate:" GridPane.columnIndex="0" GridPane.rowIndex="3" styleClass="form-label"/>
                    <Label text="3.2%" GridPane.columnIndex="1" GridPane.rowIndex="3" style="-fx-font-weight: bold;"/>
                </GridPane>
            </VBox>

            <!-- Page Settings -->
            <VBox fx:id="settingsPane" styleClass="page-content" visible="false">
                <Label text="SETTINGS" styleClass="page-title"/>
                <Label text="Configure system preferences" styleClass="page-subtitle"/>

                <!-- Formulaire de paramètres -->
                <VBox spacing="15" style="-fx-padding: 20; -fx-background-color: white; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 8;">
                    <!-- Notifications -->
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="NOTIFICATIONS" styleClass="form-label" prefWidth="200"/>
                        <VBox spacing="8">
                            <CheckBox text="Email notifications" selected="true"/>
                            <CheckBox text="Push notifications" selected="true"/>
                            <CheckBox text="SMS alerts" selected="false"/>
                        </VBox>
                    </HBox>

                    <!-- Séparateur -->
                    <Pane prefHeight="1" style="-fx-background-color: #e0e0e0; -fx-pref-width: 100%;"/>

                    <!-- Thème -->
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="THEME" styleClass="form-label" prefWidth="200"/>
                        <ComboBox prefWidth="200">
                            <items>
                                <FXCollections fx:factory="observableArrayList">
                                    <String fx:value="Light"/>
                                    <String fx:value="Dark"/>
                                    <String fx:value="Black  White"/>
                                </FXCollections>
                            </items>
                        </ComboBox>
                    </HBox>

                    <!-- Langue -->
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="LANGUAGE" styleClass="form-label" prefWidth="200"/>
                        <ComboBox prefWidth="200">
                            <items>
                                <FXCollections fx:factory="observableArrayList">
                                    <String fx:value="English"/>
                                    <String fx:value="French"/>
                                    <String fx:value="Spanish"/>
                                </FXCollections>
                            </items>
                        </ComboBox>
                    </HBox>

                    <!-- Auto-sauvegarde -->
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="AUTO-SAVE" styleClass="form-label" prefWidth="200"/>
                        <VBox spacing="5">
                            <CheckBox text="Enable auto-save" selected="true"/>
                            <Label text="Every 5 minutes" style="-fx-font-size: 12px; -fx-text-fill: #666666;"/>
                        </VBox>
                    </HBox>

                    <!-- Bouton de sauvegarde -->
                    <HBox spacing="10" style="-fx-padding: 20 0 0 0;">
                        <Button text="SAVE SETTINGS" styleClass="action-button"/>
                        <Button text="RESET TO DEFAULT" styleClass="secondary-button"/>
                    </HBox>
                </VBox>

                <!-- Section système -->
                <VBox spacing="10" style="-fx-padding: 20 0;">
                    <Label text="SYSTEM INFORMATION" styleClass="page-subtitle"/>
                    <GridPane hgap="15" vgap="10">
                        <Label text="Version:" GridPane.columnIndex="0" GridPane.rowIndex="0" style="-fx-text-fill: #666666;"/>
                        <Label text="1.0.0" GridPane.columnIndex="1" GridPane.rowIndex="0" style="-fx-font-weight: bold;"/>

                        <Label text="Last Update:" GridPane.columnIndex="0" GridPane.rowIndex="1" style="-fx-text-fill: #666666;"/>
                        <Label text="2024-01-10" GridPane.columnIndex="1" GridPane.rowIndex="1" style="-fx-font-weight: bold;"/>

                        <Label text="Database:" GridPane.columnIndex="0" GridPane.rowIndex="2" style="-fx-text-fill: #666666;"/>
                        <Label text="MySQL 8.0" GridPane.columnIndex="1" GridPane.rowIndex="2" style="-fx-font-weight: bold;"/>
                    </GridPane>
                </VBox>
            </VBox>

        </StackPane>
    </center>

    <!-- Bottom : Footer -->
    <bottom>
        <HBox styleClass="footer-box">
            <Label text="© 2024 DASHBOARD SYSTEM | ADMIN PANEL | VERSION 1.0.0" styleClass="footer-text"/>
        </HBox>
    </bottom>
</BorderPane>